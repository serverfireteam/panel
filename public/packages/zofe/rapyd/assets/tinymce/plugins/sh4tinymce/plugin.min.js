tinymce.PluginManager.requireLangPack("sh4tinymce");tinymce.PluginManager.add("sh4tinymce",function(e,url){function t(){function p(e){var t=e.split(";");var n={};for(var r=0;r<t.length;r++){var s=t[r].split(":");n[s[0].replace(/\-/g,"")]=s[1]}tinymce.each(n,function(e,t){if(t=="brush"){if(i.language!=e)i.language=e}else{e=e=="true"?true:e=="false"?false:e;if(t=='highlight')e=e.replace(/\[/g,"").replace(/\]/g,"");i[t]=e}})}function v(t){var n=t.data.code;n=n.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");var r=t.data.language?t.data.language:u;var i=t.data.collapse!=o.collapse?";collapse:"+t.data.collapse:"";var f=t.data.autolinks!=o.autolinks?";auto-links:"+t.data.autolinks:"";var c=t.data.gutter!=o.gutter?";gutter:"+t.data.gutter:"";var h=t.data.htmlscript!=o.htmlscript?";html-script:"+t.data.htmlscript:"";var p=t.data.toolbar!=o.toolbar?";toolbar:"+t.data.toolbar:"";var d=t.data.firstline!=o.firstline?";first-line:"+t.data.firstline:"";var hls=t.data.highlight.indexOf(",")!=-1?"[":"",hle=t.data.highlight.indexOf(",")!=-1?"]":"";var v=t.data.highlight.replace(/ /g,"").replace(/\[/g,"").replace(/\]/g,"")!=o.highlight?";highlight:"+hls+t.data.highlight.replace(/ /g,"").replace(/\[/g,"").replace(/\]/g,"").replace(/,$/g,"")+hle:"";var m=t.data.tabsize!=o.tabsize?";tab-size:"+t.data.tabsize:"";s=e.dom.create("pre",{"class":"brush:"+r+i+f+c+h+p+d+v+m,contenteditable:"false"},n);if(a)e.dom.replace(s,l);else e.insertContent(e.dom.getOuterHTML(s)+"<br>")}var t,n=e.dom,r=e.selection,i={},s;var o={},u="html",a=false,f,l=r.getNode(),c;o.autolinks=true;o.collapse=false;o.firstline="1";o.gutter=true;o.highlight="";o.htmlscript=false;o.tabsize="4";o.toolbar=true;i.language="";i.autolinks=o.autolinks;i.collapse=o.collapse;i.firstline=o.firstline;i.gutter=o.gutter;i.highlight=o.highlight;i.htmlscript=o.htmlscript;i.tabsize=o.tabsize;i.toolbar=o.toolbar;var h=[{text:"Language",value:""},{text:"ActionScript3",value:"as3"},{text:"Bash/shell",value:"bash"},{text:"ColdFusion",value:"cf"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"CSS",value:"css"},{text:"Delphi",value:"delphi"},{text:"Diff",value:"diff"},{text:"Erlang",value:"erl"},{text:"Groovy",value:"groovy"},{text:"HTML",value:"html"},{text:"Java",value:"java"},{text:"JavaFX",value:"jfx"},{text:"JavaScript",value:"js"},{text:"Perl",value:"perl"},{text:"PHP",value:"php"},{text:"PowerShell",value:"ps"},{text:"Python",value:"py"},{text:"Ruby",value:"ruby"},{text:"Scala",value:"scala"},{text:"SQL",value:"sql"},{text:"Text",value:"plain"},{text:"Visual Basic",value:"vb"},{text:"XML",value:"xml"}];if(l.nodeName.toLowerCase()=="pre"&&l.className.indexOf("brush:")!=-1){a=true;f=$(l).html();f=f.replace(/\&lt\;/gi,"<").replace(/\&gt\;/gi,">");c=l.className;c=c.replace(/ /g,"");p(c)}else{f=r.getContent({format:"text"});i.autolinks=false;i.toolbar=false}for(var d=0;d<h.length;d++){if(h[d].value==i.language){h[d].selected=true}}i.code=f;if(i.code=="&nbsp;")i.code="";t=e.windowManager.open({title:"SH4TinyMCE - Code Editor",data:i,minWidth:450,body:[{name:"language",type:"listbox",values:h},{name:"code",type:"textbox",minHeight:200,multiline:true},{type:"container",layout:"flex",direction:"row",align:"center",spacing:7,items:[{name:"collapse",type:"checkbox",text:"Collapse",checked:i.collapse},{name:"autolinks",type:"checkbox",text:"Autolinks",checked:i.autolinks},{name:"gutter",type:"checkbox",text:"Gutter",checked:i.gutter},{name:"htmlscript",type:"checkbox",text:"Html script",checked:i.htmlscript},{name:"toolbar",type:"checkbox",text:"Toolbar",checked:i.toolbar}]},{type:"form",padding:0,labelGap:5,spacing:5,direction:"row",items:[{name:"firstline",type:"textbox",label:"First Line",size:3,value:i.firstline},{name:"highlight",type:"textbox",label:"Highlight",size:10,value:i.highlight},{name:"tabsize",type:"textbox",label:"Tab size",size:3,value:i.tabsize}]}],onsubmit:v})}tinymce.DOM.loadCSS(url+'/style/style.css');e.addButton("sh4tinymce",{icon:"sh4tinymce",tooltip:"Insert/Edit Code",onclick:t});e.addMenuItem("sh4tinymce",{text:"SH4TinyMCE",icon:"sh4tinymce",context:"insert",onclick:t})})